{% extends "base.html" %}

{% block content %}

{% if error_message %}
<div class="alert"
     style="background-color: #fff3cd; color: #856404; border-radius: 5px; padding: 10px; margin-bottom: 10px;">
    {{ error_message }}
</div>
{% endif %}

<h2 class="mb-3">Editar Jogador üéæ</h2>

<form method="post" class="container">

    <!-- NOME -->
    <div class="row">
        <div class="mb-3 col-md-8">
            <label class="form-label">Nome</label>
            <input type="text"
                   name="name"
                   class="form-control"
                   value="{{ player.name }}"
                   required>
        </div>
    </div>

    <!-- SEXO + N√çVEL -->
    <div class="row">
        <div class="mb-3 col-md-3">
            <label class="form-label">Sexo</label>
            <select name="sexo" class="form-select" required>
                <option value="M" {% if player.sexo == 'M' %}selected{% endif %}>
                    Masculino
                </option>
                <option value="F" {% if player.sexo == 'F' %}selected{% endif %}>
                    Feminino
                </option>
            </select>
        </div>

        <div class="mb-3 col-md-3">
            <label class="form-label">N√≠vel</label>
            <select name="nivel" class="form-select" required>
                <option value="M1" {% if player.nivel == 'M1' %}selected{% endif %}>M1</option>
                <option value="F1" {% if player.nivel == 'F1' %}selected{% endif %}>F1</option>
                <option value="M2" {% if player.nivel == 'M2' %}selected{% endif %}>M2</option>
                <option value="F2" {% if player.nivel == 'F2' %}selected{% endif %}>F2</option>
                <option value="M3" {% if player.nivel == 'M3' %}selected{% endif %}>M3</option>
                <option value="F3" {% if player.nivel == 'F3' %}selected{% endif %}>F3</option>
            </select>
        </div>
    </div>

    <!-- DATA NASCIMENTO + IDADE -->
    <div class="row">
        <div class="mb-3 col-md-3">
            <label class="form-label">Data de Nascimento</label>
            <input type="date"
                   class="form-control"
                   name="data_nascimento"
                   value="{{ player.data_nascimento.strftime('%Y-%m-%d') }}"
                   required>
        </div>

        <div class="mb-3 col-md-2">
            <label class="form-label">
                Idade
                <span class="ms-1"
                      data-bs-toggle="tooltip"
                      data-bs-placement="top"
                      title="Calculada automaticamente com base na data de nascimento">
                    ‚ÑπÔ∏è
                </span>
            </label>
            <input type="text"
                   class="form-control"
                   value="{{ player.idade }}"
                   readonly>
        </div>
    </div>

    <div class="mt-3">
        <button type="submit" class="btn btn-primary">Atualizar</button>
        <a href="/players" class="btn btn-secondary">Cancelar</a>
    </div>

</form>

<!-- Tooltips Bootstrap -->
<script>
document.addEventListener("DOMContentLoaded", function () {
    var tooltipTriggerList = [].slice.call(
        document.querySelectorAll('[data-bs-toggle="tooltip"]')
    );
    tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
    });
});
</script>

{% endblock %}
